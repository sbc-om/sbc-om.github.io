---
interface Item {
  title: string;
  link: string;
  icon: string;
  color: string;
}

const links: Item[] = [
  {
    title: "Home",
    link: "/",
    icon: "fa-solid fa-house",
    color: "hover:text-primary"
  },
  {
    title: "Work",
    link: "/work",
    icon: "fa-solid fa-suitcase",
    color: "hover:text-secondary"
  },
  {
    title: "Contact",
    link: "/contact",
    icon: "fa-solid fa-envelope",
    color: "hover:text-success"
  },
];
---

<!-- Desktop Navigation -->
<nav class="fixed md:left-6 md:top-1/2 md:-translate-y-1/2 max-md:bottom-6 max-md:left-1/2 max-md:-translate-x-1/2 z-50">
  <ul class="flex md:flex-col p-3 bg-base-200/90 backdrop-blur-md border-2 border-base-300/50 rounded-2xl shadow-xl max-md:menu-xs">
    {links.map(({ title, link, icon, color }) => (
      <li class="group">
        <a 
          aria-label={title} 
          href={link} 
          class={`btn btn-square btn-ghost relative overflow-hidden transition-all duration-300 ${color} hover:scale-110 hover:shadow-lg`}
        >
          <!-- Icon -->
          <i class={`${icon} text-lg transition-transform duration-300 group-hover:scale-110`}></i>
          
          <!-- Tooltip -->
          <div class="absolute left-full ml-3 px-3 py-1 bg-base-100 text-base-content text-sm font-medium rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-300 pointer-events-none whitespace-nowrap max-md:hidden">
            {title}
            <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-base-100"></div>
          </div>
          
          <!-- Active indicator -->
          <div class="absolute inset-0 bg-gradient-to-r from-primary/20 to-secondary/20 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10"></div>
        </a>
      </li>
    ))}
  </ul>
  
  <!-- Theme Toggle Button -->
  <div class="mt-4 max-md:hidden">
    <button 
      id="theme-toggle"
      class="btn btn-square btn-ghost bg-base-200/90 backdrop-blur-md border-2 border-base-300/50 hover:scale-110 hover:shadow-lg transition-all duration-300 group"
      aria-label="Toggle theme"
    >
      <i class="fa-solid fa-palette text-lg transition-transform duration-300 group-hover:scale-110 group-hover:text-primary"></i>
      
      <!-- Theme tooltip -->
      <div class="absolute left-full ml-3 px-3 py-1 bg-base-100 text-base-content text-sm font-medium rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-300 pointer-events-none whitespace-nowrap">
        Switch Theme
        <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-base-100"></div>
      </div>
    </button>
  </div>
</nav>

<!-- Mobile Theme Toggle -->
<div class="fixed top-6 right-6 md:hidden z-50">
  <button 
    id="mobile-theme-toggle"
    class="btn btn-circle btn-primary shadow-lg hover:scale-110 transition-all duration-300"
    aria-label="Toggle theme"
  >
    <i class="fa-solid fa-palette text-lg"></i>
  </button>
</div>

<!-- Back to Top Button -->
<button 
  id="back-to-top"
  class="fixed bottom-24 right-6 md:bottom-6 md:right-6 btn btn-circle btn-primary shadow-lg opacity-0 pointer-events-none transition-all duration-300 hover:scale-110 z-40"
  aria-label="Back to top"
>
  <i class="fa-solid fa-arrow-up text-lg"></i>
</button>

<script>
  // Enhanced navigation functionality
  document.addEventListener('DOMContentLoaded', function() {
    // Theme switching functionality
    const themes = ['abyss', 'light', 'dark', 'cupcake', 'forest', 'synthwave', 'cyberpunk'];
    let currentThemeIndex = 0;
    
    function switchTheme() {
      currentThemeIndex = (currentThemeIndex + 1) % themes.length;
      const newTheme = themes[currentThemeIndex];
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      
      // Show theme notification
      showThemeNotification(newTheme);
    }
    
    function showThemeNotification(theme: string) {
      // Remove existing notification
      const existing = document.querySelector('.theme-notification');
      if (existing) existing.remove();
      
      // Create new notification
      const notification = document.createElement('div');
      notification.className = 'theme-notification fixed top-6 left-1/2 -translate-x-1/2 bg-base-100 text-base-content px-4 py-2 rounded-lg shadow-lg z-50 transform -translate-y-full opacity-0 transition-all duration-300';
      notification.innerHTML = `<i class="fa-solid fa-palette mr-2"></i>Theme: ${theme.charAt(0).toUpperCase() + theme.slice(1)}`;
      document.body.appendChild(notification);
      
      // Animate in
      setTimeout(() => {
        notification.style.transform = 'translateX(-50%) translateY(0)';
        notification.style.opacity = '1';
      }, 100);
      
      // Animate out
      setTimeout(() => {
        notification.style.transform = 'translateX(-50%) translateY(-100%)';
        notification.style.opacity = '0';
        setTimeout(() => notification.remove(), 300);
      }, 2000);
    }
    
    // Load saved theme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      const themeIndex = themes.indexOf(savedTheme);
      if (themeIndex !== -1) {
        currentThemeIndex = themeIndex;
        document.documentElement.setAttribute('data-theme', savedTheme);
      }
    }
    
    // Theme toggle button handlers
    const themeToggle = document.getElementById('theme-toggle');
    const mobileThemeToggle = document.getElementById('mobile-theme-toggle');
    
    if (themeToggle) {
      themeToggle.addEventListener('click', switchTheme);
    }
    
    if (mobileThemeToggle) {
      mobileThemeToggle.addEventListener('click', switchTheme);
    }
    
    // Back to top functionality
    const backToTopBtn = document.getElementById('back-to-top');
    
    if (backToTopBtn) {
      // Show/hide back to top button based on scroll position
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          backToTopBtn.style.opacity = '1';
          backToTopBtn.style.pointerEvents = 'auto';
        } else {
          backToTopBtn.style.opacity = '0';
          backToTopBtn.style.pointerEvents = 'none';
        }
      });
      
      // Scroll to top when clicked
      backToTopBtn.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    }
    
    // Active page indicator
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll('nav a') as NodeListOf<HTMLAnchorElement>;
      navLinks.forEach(link => {
      if (link.getAttribute('href') === currentPath || 
          (currentPath === '/' && link.getAttribute('href') === '/') ||
          (currentPath.startsWith('/work') && link.getAttribute('href') === '/work') ||
          (currentPath.startsWith('/contact') && link.getAttribute('href') === '/contact')) {
        link.classList.add('btn-primary');
        link.classList.remove('btn-ghost');
      }
    });
    
    // Enhanced hover effects for navigation
    navLinks.forEach(link => {
      link.addEventListener('mouseenter', function() {
        if (!this.classList.contains('btn-primary')) {
          this.style.transform = 'scale(1.1) rotate(5deg)';
        }
      });
      
      link.addEventListener('mouseleave', function() {
        if (!this.classList.contains('btn-primary')) {
          this.style.transform = 'scale(1) rotate(0deg)';
        }
      });
    });
  });
</script>
